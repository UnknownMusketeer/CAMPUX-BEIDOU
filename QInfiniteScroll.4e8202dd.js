import{c as D,w as m,a as U,x as f,C as _,B as q,D as Q,af as k,b1 as z,h as T,b as O,aA as R,b2 as v,y as V,az as S,b3 as E,b4 as j,b5 as B,z as F,g as W}from"./index.53118d9a.js";window.CESIUM_BASE_URL="/cesium/";const{passive:r}=R,J=D({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(l,{slots:x,emit:y}){const s=m(!1),a=m(!0),u=m(null);let c=l.initialIndex||0,e,i;const H=U(()=>"q-infinite-scroll__loading"+(s.value===!0?"":" invisible"));function o(){if(l.disable===!0||s.value===!0||a.value===!1)return;const t=v(e),n=S(e),b=B(e);l.reverse===!1?Math.round(n+b+l.offset)>=Math.round(t)&&d():Math.round(n)<=l.offset&&d()}function d(){if(l.disable===!0||s.value===!0||a.value===!1)return;c++,s.value=!0;const t=v(e);y("load",c,n=>{a.value===!0&&(s.value=!1,V(()=>{if(l.reverse===!0){const b=v(e),A=S(e),C=b-t;E(e,A+C)}n===!0?g():u.value&&u.value.closest("body")&&i()}))})}function M(){c=0}function I(){a.value===!1&&(a.value=!0,e.addEventListener("scroll",i,r)),o()}function g(){a.value===!0&&(a.value=!1,s.value=!1,e.removeEventListener("scroll",i,r),i!==void 0&&i.cancel!==void 0&&i.cancel())}function L(){if(e&&a.value===!0&&e.removeEventListener("scroll",i,r),e=j(u.value,l.scrollTarget),a.value===!0){if(e.addEventListener("scroll",i,r),l.reverse===!0){const t=v(e),n=B(e);E(e,t-n)}o()}}function N(t){c=t}function P(t){t=parseInt(t,10);const n=i;i=t<=0?o:F(o,isNaN(t)===!0?100:t),e&&a.value===!0&&(n!==void 0&&e.removeEventListener("scroll",n,r),e.addEventListener("scroll",i,r))}f(()=>l.disable,t=>{t===!0?g():I()}),f(()=>l.reverse,t=>{s.value===!1&&a.value===!0&&o()}),f(()=>l.scrollTarget,L),f(()=>l.debounce,P);let h=!1;_(()=>{h!==!1&&e&&E(e,h)}),q(()=>{h=e?S(e):!1}),Q(()=>{a.value===!0&&e.removeEventListener("scroll",i,r)}),k(()=>{P(l.debounce),L()});const w=W();return Object.assign(w.proxy,{poll:()=>{i!==void 0&&i()},trigger:d,stop:g,reset:M,resume:I,setIndex:N}),()=>{const t=z(x.default,[]);return l.disable!==!0&&a.value===!0&&t[l.reverse===!1?"push":"unshift"](T("div",{class:H.value},O(x.loading))),T("div",{class:"q-infinite-scroll",ref:u},t)}}});export{J as Q};
