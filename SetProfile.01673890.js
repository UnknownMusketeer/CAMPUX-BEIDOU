import{w as i,Y as x,Z as y,$ as P,a0 as d,a1 as l,a8 as p,a2 as Q,a$ as v,a3 as U,aa as q,a5 as w}from"./index.53118d9a.js";import{Q as c}from"./Campus.4b74de92.js";import{Q as h}from"./QForm.b4e328ed.js";import{d as B}from"./QAvatar.228b257b.js";window.CESIUM_BASE_URL="/cesium/";const C=w(" \u5B8C\u5584\u4E2A\u4EBA\u8D44\u6599 "),D={class:"q-pa-xs",style:{"max-width":"320px","min-width":"270px"}},N={__name:"SetProfile",emits:["hideSetProfileDialog"],setup(E,{emit:f}){const b=localStorage.getItem("username.caucx"),n=i(""),s=i(""),t=i(""),r=i({}),V=[{label:"\u7537",value:0},{label:"\u5973",value:1}],g=[{label:"\u4E2D\u56FD\u6C11\u822A\u5927\u5B66",value:1},{label:"\u897F\u5357\u4EA4\u901A\u5927\u5B66",value:2}],o=i(""),_=x();function S(){let u=new FormData,e=!1;if(n.value!=r.value.name&&(u.append("name",n.value),e=!0),s.value!=r.value.description&&(u.append("description",s.value),e=!0),o.value.label!=r.value.university_name&&(u.append("university",o.value.value),e=!0),t.value!=null&&t.value.value!=r.value.gender&&(u.append("gender",t.value.value),e=!0),!e)return;let a={method:"patch",data:u,url:`http://127.0.0.1:8000/api/campus/profile/${b}/`};console.log(o.value.value),B(a).then(m=>{console.log(m.data),n.value="",s.value="",t.value="",o.value="",_.commit("setProfile",m.data),f("hideSetProfileDialog")})}return(u,e)=>(y(),P(q,null,{default:d(()=>[l(p,{class:"text-center"},{default:d(()=>[C]),_:1}),l(p,{class:"q-pt-md"},{default:d(()=>[Q("div",D,[l(h,{onSubmit:S,class:"q-gutter-md text-center"},{default:d(()=>[l(v,{class:"q-pb-none q-mt-none",filled:"",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),"lazy-rules":"",label:"\u540D\u5B57"},null,8,["modelValue"]),l(v,{class:"q-pb-none",filled:"",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a),"lazy-rules":"",label:"\u7B80\u4ECB"},null,8,["modelValue"]),l(c,{modelValue:t.value,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value=a),options:V,label:"\u6027\u522B",filled:"",behavior:"menu"},null,8,["modelValue"]),l(c,{modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value=a),options:g,label:"\u5B66\u6821",filled:"",behavior:"menu"},null,8,["modelValue"]),l(U,{label:"\u4FDD\u5B58",type:"submit",color:"grey-8",outline:"",rounded:"",size:"sm"})]),_:1})])]),_:1})]),_:1}))}};export{N as default};
